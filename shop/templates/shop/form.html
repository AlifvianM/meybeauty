<!DOCTYPE html>
<html>
<head>
	<title>form</title>
	<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body>

	<div class="container">
		<H1>FORM</H1>
		<form method="POST">
			{% csrf_token %}
			<input type="hidden" name="provinsi_asal" value="11">
			<input type="hidden" name="kota_asal" value="42" id="kota">
			
			<label>Provinsi Tujuan</label>
				<select class="form-group" name="provinsi_tujuan" id="prov_tujuan">
					{% for s in provinces.values %}
						{% for t in s.results %}
							<option value="{{t.province_id}}">{{t.province}}</option>
						{% endfor %}
					{% endfor %}
				</select>

			<div id="kota_tujuan">
				<label>Kota Tujuan</label>
				<select name="kota_tujuan">
					
				</select>
			</div>
			
			<div id="kecamatan_tujuan">
				<label>Kecamatan Tujuan</label>
				<select name="kecamatan_tujuan">
					
				</select>
			</div>

			<label>Jasa Ekspedisi</label>
				<select id="ongkir" name="jasa_ongkir">
					<option value="">--------</option>
					<option value="jne">JNE</option>
					<option value="tiki">TIKI</option>
				</select>

			<label>Berat</label>
			<input type="number" name="Berat" value="1000" id="berat">

			
				
			
			<div id="service">
				
				
			</div>

			<button class="btn btn-success" id="submit" type="button">CEK</button>

			<button class="btn btn-primary" type="submit">LANJUT</button>
			

		</form>
	</div>

<!-- <form method="POST">
			{% csrf_token %}

	{{form}}
	<button type="submit">SUBMIT</button>
</form> -->

<!-- <div class="container">
	<form method="POST" enctype="multipart/form-data">
		{% csrf_token %}
		
			<label for="prov">{{form.provinsi_asal.label}}</label>
			<select class="form-group" id="prov" name="{{form.provinsi_asal.label}} readonly">
				<option value="null">-----</option>
				{% for s in provinces.values %}
					{% for t in s.results %}
						<option value="{{t.province_id}}">{{t.province}}</option>
					{% endfor %}
				{% endfor %}
				
			</select>


			<div id="kota">
				<label>{{form.kota_asal.label}}</label>
				<select class="form-group" id="kota" name="{{form.kota_asal.label}} readonly">
					
				</select>
			</div>


			<label for="prov">{{form.provisi_tujuan.label}}</label>
			<select class="form-group" id="prov_tujuan" name="provisi_tujuan">
				<option value="null">-----</option>
				{% for s in provinces.values %}
					{% for t in s.results %}
						<option value="{{t.province_id}}">{{t.province}}</option>
					{% endfor %}
				{% endfor %}
			</select>


		<div id="kota_tujuan">
				<label>{{form.kota_tujuan.label}}</label>
				<select class="form-group"  name="kota_tujuan">
					
				</select>
		</div>

		<div id="kecamatan_tujuan">
				<label>{{form.kecamatan_tujuan.label}}</label>
				<select class="form-group" name="kecamatan_tujuan">
					
				</select>
		</div>

		<label>{{form.jasa_ongkir.label}}</label>
			<select id="ongkir" name="{{form.jasa_ongkir.label}}">
				<option value="">--------</option>
				<option value="jne">JNE</option>
				<option value="tiki">TIKI</option>
			</select>

			<label>Berat</label>
			<input type="number" name="Berat" value="1000" id="berat">

			<button class="btn btn-success" id="submit" type="button">CEK</button>
			<button class="btn btn-primary" type="submit">LANJUT</button>		

	</form>
</div> -->

	<script type="text/javascript">
		// function test(){

		// }
		$(document).ready(function(){
		  $("#prov").change(function(){
			prov_id = $("#prov :selected").val();
        		$("#kota").load("/cek_kota/" + prov_id);

		  });
		  $("#prov_tujuan").change(function(){
			prov_tujuan_id = $("#prov_tujuan :selected").val();
        		$("#kota_tujuan").load("/cek_kota/" + prov_tujuan_id);

		  });

		  $("#kota_tujuan").change(function(){
			kota_tujuan_id = $("#kota_tujuan :selected").val();
        		$("#kecamatan_tujuan").load("/cek_kecamatan_tujuan/" + kota_tujuan_id);

		  });

		  $("#submit").click(function(){
			kota_id = $("#kota").val();
			kecamatan_tujuan_id = $("#kecamatan_tujuan :selected").val();
			berat = $("#berat").val();
			jasa_ongkir = $("#ongkir :selected").val();
        		$("#service").load("/cek_ongkir/" + kota_id + "/" + kecamatan_tujuan_id + "/" + berat + "/" +jasa_ongkir);
		  });

		 //  $("#ongkir").change(function(){
			
			// jasa_ongkir = $("#ongkir :selected").val();
   //      		$("#service").load("/cek_ongkir/" + kota_id + "/" + kecamatan_tujuan_id + "/" + berat + "/" +jasa_ongkir);
		 //  });


		});
		
	</script>

<!-- 
 <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>
</html>